

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Writing a configuration file &mdash; 3DB  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinxcontrib-images/LightBox2/lightbox2/css/lightbox.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/tabs.js"></script>
        <script src="../_static/sphinxcontrib-images/LightBox2/lightbox2/js/jquery-1.11.0.min.js"></script>
        <script src="../_static/sphinxcontrib-images/LightBox2/lightbox2/js/lightbox.min.js"></script>
        <script src="../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Customizing 3DB" href="customizing.html" />
    <link rel="prev" title="Getting started with 3DB" href="quickstart.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> 3DB
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Getting started with 3DB</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#run-a-simple-experiment">Run a simple experiment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="quickstart.html#running-the-master-node">Running the master node</a></li>
<li class="toctree-l3"><a class="reference internal" href="quickstart.html#running-the-clients">Running the clients</a></li>
<li class="toctree-l3"><a class="reference internal" href="quickstart.html#running-the-dashboard">Running the dashboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="quickstart.html#analyzing-the-results">Analyzing the results</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Writing a configuration file</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#inference-settings">Inference settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#evaluation-settings">Evaluation settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rendering-settings">Rendering settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#controls-settings">Controls settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#policy-settings">Policy settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#logging-settings">Logging settings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="customizing.html">Customizing 3DB</a><ul>
<li class="toctree-l2"><a class="reference internal" href="customizing.html#the-3db-workflow">The 3DB Workflow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="customizing.html#step-1-scheduler-prioritizes-a-job-server-sends-to-client">Step 1: Scheduler prioritizes a job, server sends to client</a></li>
<li class="toctree-l3"><a class="reference internal" href="customizing.html#step-2-client-renders-and-applies-controls">Step 2: Client renders and applies controls</a></li>
<li class="toctree-l3"><a class="reference internal" href="customizing.html#step-3-client-predicts-and-evaluates">Step 3: Client predicts and evaluates</a></li>
<li class="toctree-l3"><a class="reference internal" href="customizing.html#step-4-results-sent-back-to-server">Step 4: Results sent back to server</a></li>
<li class="toctree-l3"><a class="reference internal" href="customizing.html#customization">Customization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="customizing.html#customization-guides">Customization Guides</a><ul>
<li class="toctree-l3"><a class="reference internal" href="custom_controls.html">Adding Custom Controls</a><ul>
<li class="toctree-l4"><a class="reference internal" href="custom_controls.html#preprocesscontrol">PreProcessControl</a></li>
<li class="toctree-l4"><a class="reference internal" href="custom_controls.html#postprocesscontrol">PostProcessControl</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="custom_inference.html">Using a Custom Inference Model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="custom_inference.html#implementation">Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="custom_inference.html#updating-the-configuration-file">Updating the configuration file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="custom_evaluator.html">Using a Custom Evaluator (for custom tasks)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="custom_evaluator.html#implementation">Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="custom_evaluator.html#updating-the-configuration-file">Updating the configuration file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="custom_logger.html">Creating a Custom Logger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="custom_logger.html#implementation">Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="custom_logger.html#updating-the-configuration-file">Updating the configuration file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="custom_renderer.html">Customizing Rendering</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api_doc.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/threedb.controls.html">threedb.controls package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.controls.blender.html">threedb.controls.blender package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.background.html">threedb.controls.blender.background</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.camera.html">threedb.controls.blender.camera</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.denoiser.html">threedb.controls.blender.denoiser</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.imagenet_c.html">threedb.controls.blender.imagenet_c</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.material.html">threedb.controls.blender.material</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.mug_liquid.html">threedb.controls.blender.mug_liquid</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.obj_loc_in_frame.html">threedb.controls.blender.obj_loc_in_frame</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.occlusion.html">threedb.controls.blender.occlusion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.orientation.html">threedb.controls.blender.orientation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.pin_to_ground.html">threedb.controls.blender.pin_to_ground</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.pointlight.html">threedb.controls.blender.pointlight</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.position.html">threedb.controls.blender.position</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.scale.html">threedb.controls.blender.scale</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.utils.html">Rendering utils</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.controls.base_control.html">threedb.controls.base_control</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/threedb.evaluators.html">threedb.evaluators package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.evaluators.base_evaluator.html">threedb.evaluators.base_evaluator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.evaluators.classification.html">threedb.evaluators.classification</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/threedb.policies.html">threedb.policies package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.policies.grid_search.html">threedb.policies.grid_search</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.policies.random_search.html">threedb.policies.random_search</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/threedb.rendering.html">threedb.rendering package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.rendering.base_renderer.html">threedb.rendering.base_renderer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.rendering.render_blender.html">threedb.rendering.render_blender</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.rendering.utils.html">Rendering Utils</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/threedb.result_logging.html">threedb.result_logging package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.result_logging.base_logger.html">threedb.result_logging.base_logger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.result_logging.image_logger.html">threedb.result_logging.image_logger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.result_logging.json_logger.html">threedb.result_logging.json_logger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.result_logging.logger_manager.html">threedb.result_logging.logger_manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.result_logging.tb_logger.html">threedb.result_logging.tb_logger</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/threedb.scheduling.html">threedb.scheduling package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.scheduling.base_scheduler.html">threedb.scheduling.base_scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.scheduling.policy_controller.html">threedb.scheduling.policy_controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.scheduling.search_space.html">threedb.scheduling.search_space</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.scheduling.utils.html">Scheduling utils</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/threedb.client.html">threedb.client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/threedb.main.html">threedb.main</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/threedb.utils.html">threedb.utils</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">3DB</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Writing a configuration file</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/usage/writing_config_file.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="writing-a-configuration-file">
<h1>Writing a configuration file<a class="headerlink" href="#writing-a-configuration-file" title="Permalink to this headline">¶</a></h1>
<p>There are six key parts/modules of a 3DB configuration file:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">inference</span></code>: defines the model that is used to make predictions on the rendered images.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">evaluation</span></code>: defines what evaluation metrics to compute from the output from the inference model.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rendering</span></code>: defines rendering-specific settings and arguments.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">controls</span></code>: defines the set of transformations to apply to the 3D model/environment before rendering the scene.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">policy</span></code>: defines how to search through the various controls configurations.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">logging</span></code>: defines how the results of 3DB are saved (e.g. JSON, Images, TensorBoard).</p></li>
</ul>
</div></blockquote>
<p>An example of each can be found in the YAML files of the above simple experiment. We will now go through each of these sections individually and
explain the required keywords, possible settings, and customization options for
each.</p>
<div class="section" id="inference-settings">
<h2>Inference settings<a class="headerlink" href="#inference-settings" title="Permalink to this headline">¶</a></h2>
<p>The first step is to declare the inference model that 3DB will use to make predictions
by filling in a configuration under the <code class="docutils literal notranslate"><span class="pre">inference</span></code> keyword. The <code class="docutils literal notranslate"><span class="pre">module</span></code>,
<code class="docutils literal notranslate"><span class="pre">class</span></code>, and <code class="docutils literal notranslate"><span class="pre">args</span></code> keywords tell 3DB how to instantiate the prediction
model. Below are examples showing how to instantiate a pre-trained ResNet-50 classifier and a pre-trained object detection model, respectively:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">Pre-trained ResNet-50 Classifier</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">Pre-trained Object Detector</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">inference</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&#39;torchvision.models.resnet&#39;</span>
    <span class="nt">class</span><span class="p">:</span> <span class="s">&#39;resnet50&#39;</span>
    <span class="nt">args</span><span class="p">:</span>
        <span class="nt">pretrained</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">inference</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&#39;torchvision.models.detection&#39;</span>
    <span class="nt">class</span><span class="p">:</span> <span class="s">&#39;retinanet_resnet50_fpn&#39;</span>
    <span class="nt">args</span><span class="p">:</span>
        <span class="nt">pretrained</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
</pre></div>
</div>
</div></div>
<p>Next, we provide the <code class="docutils literal notranslate"><span class="pre">normalization</span></code> and <code class="docutils literal notranslate"><span class="pre">resolution</span></code> arguments, both of
which are used to pre-process inputs before they are fed to the inference model:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">inference</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&#39;torchvision.models.detection&#39;</span>
    <span class="nt">class</span><span class="p">:</span> <span class="s">&#39;retinanet_resnet50_fpn&#39;</span>
    <span class="nt">args</span><span class="p">:</span>
        <span class="nt">pretrained</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
    <span class="c1">## --- NEW STUFF ---</span>
    <span class="nt">normalization</span><span class="p">:</span>
        <span class="nt">mean</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">0.</span><span class="p p-Indicator">,</span> <span class="nv">0.</span><span class="p p-Indicator">,</span> <span class="nv">0.</span><span class="p p-Indicator">]</span>
        <span class="nt">std</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">1.</span><span class="p p-Indicator">,</span> <span class="nv">1.</span><span class="p p-Indicator">,</span> <span class="nv">1.</span><span class="p p-Indicator">]</span>
    <span class="nt">resolution</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">500</span><span class="p p-Indicator">,</span> <span class="nv">500</span><span class="p p-Indicator">]</span>
    <span class="c1">## --- /END NEW STUFF ---</span>
</pre></div>
</div>
<p>Finally, the remaining argument to specify is <code class="docutils literal notranslate"><span class="pre">label_map</span></code>. This argument is optional and only used by some loggers—you can provide the path to a JSON array containing class names, so that the output is more human-readable.</p>
<p>An example of a complete inference configuration for an object detection experiment is the following:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">inference</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&#39;torchvision.models.detection&#39;</span>
    <span class="nt">class</span><span class="p">:</span> <span class="s">&#39;retinanet_resnet50_fpn&#39;</span>
    <span class="nt">args</span><span class="p">:</span>
        <span class="nt">pretrained</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
    <span class="nt">normalization</span><span class="p">:</span>
        <span class="nt">mean</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">0.</span><span class="p p-Indicator">,</span> <span class="nv">0.</span><span class="p p-Indicator">,</span> <span class="nv">0.</span><span class="p p-Indicator">]</span>
        <span class="nt">std</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">1.</span><span class="p p-Indicator">,</span> <span class="nv">1.</span><span class="p p-Indicator">,</span> <span class="nv">1.</span><span class="p p-Indicator">]</span>
    <span class="nt">resolution</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">500</span><span class="p p-Indicator">,</span> <span class="nv">500</span><span class="p p-Indicator">]</span>
    <span class="nt">label_map</span><span class="p">:</span> <span class="s">&#39;/path/to/3db/resources/coco_mapping.json&#39;</span>
</pre></div>
</div>
<p>The user might want to use a custom inference model that goes beyond what 3DB comes with. We outline how to do that in
the <a class="reference external" href="custom_inference.html">Customizing 3DB</a> section of the documentation.</p>
</div>
<div class="section" id="evaluation-settings">
<h2>Evaluation settings<a class="headerlink" href="#evaluation-settings" title="Permalink to this headline">¶</a></h2>
<p>The evaluator module is responsible for taking the output of the inference
module and returning evaluation metrics.</p>
<p>By default, 3DB provides evaluators for both classification and object
detection models:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">Image Classification</button><button aria-controls="panel-1-1-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-1" name="1-1" role="tab" tabindex="-1">Object Detection</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">evaluation</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&#39;threedb.evaluators.classification&#39;</span>
    <span class="nt">args</span><span class="p">:</span>
        <span class="nt">classmap_path</span><span class="p">:</span> <span class="s">&#39;/path/to/3db/resources/ycb_to_IN.json&#39;</span>
        <span class="nt">topk</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-1-1" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-1" name="1-1" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">evaluation</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&quot;threedb.evaluators.detection&quot;</span>
    <span class="nt">args</span><span class="p">:</span>
        <span class="nt">iou_threshold</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.5</span>
        <span class="nt">classmap_path</span><span class="p">:</span> <span class="s">&#39;/path/to/3db/resources/uid_to_COCO.json&#39;</span>
</pre></div>
</div>
</div></div>
<p>Different modalities/tasks (e.g., segmentation or regression)
will require implementing custom evaluators, which we outline in
the <a class="reference external" href="custom_evaluator.html">Customizing 3DB</a> section of the documentation.</p>
</div>
<div class="section" id="rendering-settings">
<h2>Rendering settings<a class="headerlink" href="#rendering-settings" title="Permalink to this headline">¶</a></h2>
<p>This part of the config file is responsible for declaring rendering-specific parameters and configurations, e.g., which renderer to choose, what image sizes to render, how many ray-tracing samples to use and so forth. The currently supported keywords for this section of the config file are:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">engine</span></code>: which renderer to use. 3DB supports Blender by default, <a class="reference internal" href="../api/threedb.rendering.render_blender.html#threedb.rendering.render_blender.Blender" title="threedb.rendering.render_blender.Blender"><code class="xref py py-class docutils literal notranslate"><span class="pre">threedb.rendering.render_blender.Blender</span></code></a>. See <a class="reference external" href="custom_renderer.html">Customizing 3DB</a> for how to add custom renderers.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resolution</span></code>: the resolution of the rendered images.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">samples</span></code>: number of sample used for ray-tracing.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">with_segmentation</span></code>: if <code class="docutils literal notranslate"><span class="pre">True</span></code>, returns a segmentation map along with an RGB image. Defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">with_depth</span></code>: if <code class="docutils literal notranslate"><span class="pre">True</span></code>, returns a depth map along with an RGB image. Defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">with_uv</span></code>: if <code class="docutils literal notranslate"><span class="pre">True</span></code>, returns a UV map along with an RGB image. Defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</div></blockquote>
<p>Here is an example of these settings, where only RGB and segmentation images are returned by 3DB:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">render_args</span><span class="p">:</span>
    <span class="nt">engine</span><span class="p">:</span> <span class="s">&#39;threedb.rendering.render_blender&#39;</span>
    <span class="nt">resolution</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">256</span>
    <span class="nt">samples</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">16</span>
    <span class="nt">with_segmentation</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
    <span class="nt">with_depth</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
    <span class="nt">with_uv</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
</pre></div>
</div>
</div>
<div class="section" id="controls-settings">
<h2>Controls settings<a class="headerlink" href="#controls-settings" title="Permalink to this headline">¶</a></h2>
<p>Every experiment requires the user to define how they want to control/manipulate the scene, e.g.,</p>
<blockquote>
<div><ul class="simple">
<li><p>where will the object be placed?</p></li>
<li><p>what is the orientation of the object?</p></li>
<li><p>what is the background of the object?</p></li>
<li><p>is there anything occluding the object?</p></li>
</ul>
</div></blockquote>
<p>In order to control/manipulate the scene, a list of <code class="docutils literal notranslate"><span class="pre">controls</span></code> has to be defined in the YAML file. A number of example controls are shown below.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-2-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-2-2-0" name="2-0" role="tab" tabindex="0">Orientation</button><button aria-controls="panel-2-2-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-1" name="2-1" role="tab" tabindex="-1">Background</button><button aria-controls="panel-2-2-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-2" name="2-2" role="tab" tabindex="-1">Denoiser</button><button aria-controls="panel-2-2-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-3" name="2-3" role="tab" tabindex="-1">Position</button></div><div aria-labelledby="tab-2-2-0" class="sphinx-tabs-panel" id="panel-2-2-0" name="2-0" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">controls</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">threedb.controls.blender.orientation</span>
        <span class="l l-Scalar l-Scalar-Plain">rotation_x</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">-3.14</span><span class="p p-Indicator">,</span> <span class="nv">3.14</span><span class="p p-Indicator">]</span>
        <span class="nt">rotation_y</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">-3.14</span><span class="p p-Indicator">,</span> <span class="nv">3.14</span><span class="p p-Indicator">]</span>
        <span class="nt">rotation_z</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">-3.14</span><span class="p p-Indicator">,</span> <span class="nv">3.14</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-2-1" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-1" name="2-1" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">controls</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">threedb.controls.blender.background</span>
        <span class="l l-Scalar l-Scalar-Plain">H</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">0.0</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">]</span>
        <span class="nt">S</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">0.0</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">]</span>
        <span class="nt">V</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">0.0</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-2-2" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-2" name="2-2" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">controls</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">threedb.controls.blender.denoiser</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-2-3" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-3" name="2-3" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">controls</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">threedb.controls.blender.position</span>
        <span class="l l-Scalar l-Scalar-Plain">offset_x</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">-0.02</span><span class="p p-Indicator">,</span> <span class="nv">0.02</span><span class="p p-Indicator">]</span>
        <span class="nt">offset_y</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">-0.02</span><span class="p p-Indicator">,</span> <span class="nv">0.02</span><span class="p p-Indicator">]</span>
        <span class="nt">offset_z</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">-0.02</span><span class="p p-Indicator">,</span> <span class="nv">0.02</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</div></div>
<p>3DB comes with a set of predefined controls that the user can use. These can be found in <a class="reference internal" href="../api/threedb.controls.html#module-threedb.controls" title="threedb.controls"><code class="xref py py-mod docutils literal notranslate"><span class="pre">threedb.controls</span></code></a>. The user can also add custom controls if desired, see <a class="reference external" href="custom_controls.html">Customizing 3DB</a> for how to add new controls.</p>
</div>
<div class="section" id="policy-settings">
<h2>Policy settings<a class="headerlink" href="#policy-settings" title="Permalink to this headline">¶</a></h2>
<p>After specifying the controls to apply to specific objects/scenes, the user must specify how they want to search over the control space.
This should be done in the configuration file under policy settings.
We provide a number of default search policies that the user can directly use in <a class="reference internal" href="../api/threedb.policies.html#module-threedb.policies" title="threedb.policies"><code class="xref py py-mod docutils literal notranslate"><span class="pre">threedb.policies</span></code></a>.</p>
<p>For example, a user might want to randomly search in the space of poses of objects, or do a grid search over specific object poses. We provide example configuration files for each case in the code block below:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-3-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-3-3-0" name="3-0" role="tab" tabindex="0">Random Search</button><button aria-controls="panel-3-3-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-3-3-1" name="3-1" role="tab" tabindex="-1">Grid Search</button></div><div aria-labelledby="tab-3-3-0" class="sphinx-tabs-panel" id="panel-3-3-0" name="3-0" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">base_config</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">base.yaml</span>
<span class="nt">controls</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">threedb.controls.blender.camera</span>
        <span class="l l-Scalar l-Scalar-Plain">zoom_factor</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1.</span>
        <span class="l l-Scalar l-Scalar-Plain">aperture</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">8.</span>
        <span class="l l-Scalar l-Scalar-Plain">focal_length</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">50.</span>
    <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">threedb.controls.blender.orientation</span>
        <span class="l l-Scalar l-Scalar-Plain">rotation_x</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">-3.14</span><span class="p p-Indicator">,</span> <span class="nv">3.14</span><span class="p p-Indicator">]</span>
        <span class="nt">rotation_y</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">-3.14</span><span class="p p-Indicator">,</span> <span class="nv">3.14</span><span class="p p-Indicator">]</span>
        <span class="nt">rotation_z</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">-3.14</span><span class="p p-Indicator">,</span> <span class="nv">3.14</span><span class="p p-Indicator">]</span>
<span class="nt">policy</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&quot;threedb.policies.random_search&quot;</span>
    <span class="nt">samples</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-3-3-1" class="sphinx-tabs-panel" hidden="true" id="panel-3-3-1" name="3-1" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">base_config</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">base.yaml</span>
<span class="nt">controls</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">threedb.controls.blender.camera</span>
        <span class="l l-Scalar l-Scalar-Plain">zoom_factor</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1.</span>
        <span class="l l-Scalar l-Scalar-Plain">aperture</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">8.</span>
        <span class="l l-Scalar l-Scalar-Plain">focal_length</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">50.</span>
    <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">threedb.controls.blender.orientation</span>
        <span class="l l-Scalar l-Scalar-Plain">rotation_x</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">-3.14</span><span class="p p-Indicator">,</span> <span class="nv">3.14</span><span class="p p-Indicator">]</span>
        <span class="nt">rotation_y</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">-3.14</span><span class="p p-Indicator">,</span> <span class="nv">3.14</span><span class="p p-Indicator">]</span>
        <span class="nt">rotation_z</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">-3.14</span><span class="p p-Indicator">,</span> <span class="nv">3.14</span><span class="p p-Indicator">]</span>
<span class="nt">policy</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&quot;threedb.policies.grid_search&quot;</span>
    <span class="nt">samples_per_dim</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
</pre></div>
</div>
</div></div>
<p>The currently supported keywords for <code class="docutils literal notranslate"><span class="pre">policy</span></code> in the config file are:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">module</span></code>: which policy to use from <a class="reference internal" href="../api/threedb.policies.html#module-threedb.policies" title="threedb.policies"><code class="xref py py-mod docutils literal notranslate"><span class="pre">threedb.policies</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">samples</span></code>: For <code class="docutils literal notranslate"><span class="pre">random_search</span></code> policy only; this is the total number of random samples the policy searches over.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">samples_per_dim</span></code>: For <code class="docutils literal notranslate"><span class="pre">grid_search</span></code> policy only; this is the number of vertices per dimension on the search grid.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="logging-settings">
<h2>Logging settings<a class="headerlink" href="#logging-settings" title="Permalink to this headline">¶</a></h2>
<p>Finally, the user has to specify how to log or dump the result logs generated by 3DB.
The output returned by each 3DB rendering consists of the rendered image(s), the prediction (based on the evaluation module), the control parameters of the current render, in addition to several other pieces of meta-data (object ID, image ID, etc).
Parts of this information can be dumped into JSON files, parts can be saved as image files, and other parts can be saved via other loggers as well.</p>
<p>3DB thus comes with a number of default <code class="docutils literal notranslate"><span class="pre">loggers</span></code> that allow the user to easily read the data. These can be found in <a class="reference internal" href="../api/threedb.result_logging.html#module-threedb.result_logging" title="threedb.result_logging"><code class="xref py py-mod docutils literal notranslate"><span class="pre">threedb.result_logging</span></code></a>. Here are snippets of how to add each logger type to your YAML file.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-4-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-4-4-0" name="4-0" role="tab" tabindex="0">Image Logger</button><button aria-controls="panel-4-4-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-4-4-1" name="4-1" role="tab" tabindex="-1">JSON Logger</button><button aria-controls="panel-4-4-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-4-4-2" name="4-2" role="tab" tabindex="-1">TensorBoard Logger</button><button aria-controls="panel-4-4-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-4-4-3" name="4-3" role="tab" tabindex="-1">Dashboard Loggers</button></div><div aria-labelledby="tab-4-4-0" class="sphinx-tabs-panel" id="panel-4-4-0" name="4-0" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">logging</span><span class="p">:</span>
    <span class="nt">logger_modules</span><span class="p">:</span>
        <span class="l l-Scalar l-Scalar-Plain">threedb.result_logging.image_logger</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-4-4-1" class="sphinx-tabs-panel" hidden="true" id="panel-4-4-1" name="4-1" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">logging</span><span class="p">:</span>
    <span class="nt">logger_modules</span><span class="p">:</span>
        <span class="l l-Scalar l-Scalar-Plain">threedb.result_logging.json_logger</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-4-4-2" class="sphinx-tabs-panel" hidden="true" id="panel-4-4-2" name="4-2" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">logging</span><span class="p">:</span>
    <span class="nt">logger_modules</span><span class="p">:</span>
        <span class="l l-Scalar l-Scalar-Plain">threedb.result_logging.tb_logger</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-4-4-3" class="sphinx-tabs-panel" hidden="true" id="panel-4-4-3" name="4-3" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">logging</span><span class="p">:</span>
    <span class="nt">logger_modules</span><span class="p">:</span>
        <span class="l l-Scalar l-Scalar-Plain">threedb.result_logging.image_logger</span>
        <span class="l l-Scalar l-Scalar-Plain">threedb.result_logging.json_logger</span>
</pre></div>
</div>
</div></div>
<p>The user can also use any of these loggers simultaneously by adding them under each other (as done in <code class="docutils literal notranslate"><span class="pre">Dashboard</span> <span class="pre">Loggers</span></code>).
For adding custom loggers, see <a class="reference external" href="custom_logger.html">Customizing 3DB</a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="customizing.html" class="btn btn-neutral float-right" title="Customizing 3DB" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="quickstart.html" class="btn btn-neutral float-left" title="Getting started with 3DB" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, 3DB Team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>
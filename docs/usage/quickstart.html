

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Getting started with 3DB &mdash; 3DB  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinxcontrib-images/LightBox2/lightbox2/css/lightbox.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/tabs.js"></script>
        <script src="../_static/sphinxcontrib-images/LightBox2/lightbox2/js/jquery-1.11.0.min.js"></script>
        <script src="../_static/sphinxcontrib-images/LightBox2/lightbox2/js/lightbox.min.js"></script>
        <script src="../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Writing a configuration file" href="writing_config_file.html" />
    <link rel="prev" title="Welcome to 3DB’s documentation!" href="../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> 3DB
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting started with 3DB</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-a-simple-experiment">Run a simple experiment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-the-master-node">Running the master node</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-clients">Running the clients</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-dashboard">Running the dashboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="#analyzing-the-results">Analyzing the results</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="writing_config_file.html">Writing a configuration file</a><ul>
<li class="toctree-l2"><a class="reference internal" href="writing_config_file.html#inference-settings">Inference settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing_config_file.html#evaluation-settings">Evaluation settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing_config_file.html#rendering-settings">Rendering settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing_config_file.html#controls-settings">Controls settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing_config_file.html#policy-settings">Policy settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing_config_file.html#logging-settings">Logging settings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="customizing.html">Customizing 3DB</a><ul>
<li class="toctree-l2"><a class="reference internal" href="customizing.html#the-3db-workflow">The 3DB Workflow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="customizing.html#step-1-scheduler-prioritizes-a-job-server-sends-to-client">Step 1: Scheduler prioritizes a job, server sends to client</a></li>
<li class="toctree-l3"><a class="reference internal" href="customizing.html#step-2-client-renders-and-applies-controls">Step 2: Client renders and applies controls</a></li>
<li class="toctree-l3"><a class="reference internal" href="customizing.html#step-3-client-predicts-and-evaluates">Step 3: Client predicts and evaluates</a></li>
<li class="toctree-l3"><a class="reference internal" href="customizing.html#step-4-results-sent-back-to-server">Step 4: Results sent back to server</a></li>
<li class="toctree-l3"><a class="reference internal" href="customizing.html#customization">Customization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="customizing.html#customization-guides">Customization Guides</a><ul>
<li class="toctree-l3"><a class="reference internal" href="custom_controls.html">Adding Custom Controls</a><ul>
<li class="toctree-l4"><a class="reference internal" href="custom_controls.html#preprocesscontrol">PreProcessControl</a></li>
<li class="toctree-l4"><a class="reference internal" href="custom_controls.html#postprocesscontrol">PostProcessControl</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="custom_inference.html">Using a Custom Inference Model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="custom_inference.html#implementation">Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="custom_inference.html#updating-the-configuration-file">Updating the configuration file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="custom_evaluator.html">Using a Custom Evaluator (for custom tasks)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="custom_evaluator.html#implementation">Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="custom_evaluator.html#updating-the-configuration-file">Updating the configuration file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="custom_logger.html">Creating a Custom Logger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="custom_logger.html#implementation">Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="custom_logger.html#updating-the-configuration-file">Updating the configuration file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="custom_renderer.html">Customizing Rendering</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api_doc.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/threedb.controls.html">threedb.controls package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.controls.blender.html">threedb.controls.blender package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.background.html">threedb.controls.blender.background</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.camera.html">threedb.controls.blender.camera</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.denoiser.html">threedb.controls.blender.denoiser</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.imagenet_c.html">threedb.controls.blender.imagenet_c</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.material.html">threedb.controls.blender.material</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.mug_liquid.html">threedb.controls.blender.mug_liquid</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.obj_loc_in_frame.html">threedb.controls.blender.obj_loc_in_frame</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.occlusion.html">threedb.controls.blender.occlusion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.orientation.html">threedb.controls.blender.orientation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.pin_to_ground.html">threedb.controls.blender.pin_to_ground</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.pointlight.html">threedb.controls.blender.pointlight</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.position.html">threedb.controls.blender.position</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.scale.html">threedb.controls.blender.scale</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/threedb.controls.blender.utils.html">Rendering utils</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.controls.base_control.html">threedb.controls.base_control</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/threedb.evaluators.html">threedb.evaluators package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.evaluators.base_evaluator.html">threedb.evaluators.base_evaluator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.evaluators.classification.html">threedb.evaluators.classification</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/threedb.policies.html">threedb.policies package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.policies.grid_search.html">threedb.policies.grid_search</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.policies.random_search.html">threedb.policies.random_search</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/threedb.rendering.html">threedb.rendering package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.rendering.base_renderer.html">threedb.rendering.base_renderer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.rendering.render_blender.html">threedb.rendering.render_blender</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.rendering.utils.html">Rendering Utils</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/threedb.result_logging.html">threedb.result_logging package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.result_logging.base_logger.html">threedb.result_logging.base_logger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.result_logging.image_logger.html">threedb.result_logging.image_logger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.result_logging.json_logger.html">threedb.result_logging.json_logger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.result_logging.logger_manager.html">threedb.result_logging.logger_manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.result_logging.tb_logger.html">threedb.result_logging.tb_logger</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/threedb.scheduling.html">threedb.scheduling package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.scheduling.base_scheduler.html">threedb.scheduling.base_scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.scheduling.policy_controller.html">threedb.scheduling.policy_controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.scheduling.search_space.html">threedb.scheduling.search_space</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/threedb.scheduling.utils.html">Scheduling utils</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/threedb.client.html">threedb.client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/threedb.main.html">threedb.main</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/threedb.utils.html">threedb.utils</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">3DB</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Getting started with 3DB</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/usage/quickstart.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started-with-3db">
<h1>Getting started with 3DB<a class="headerlink" href="#getting-started-with-3db" title="Permalink to this headline">¶</a></h1>
<p>In this page, we’ll go through all the steps to run a 3DB experiment
out-of-the-box.</p>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>You will need a working Python 3.x installation. To follow the rest of this page, you will also need <a class="reference external" href="https://docs.anaconda.com/anaconda/install/">Anaconda</a>.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>To get started with 3DB, run the following command to install Blender and setup 3DB:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl https://raw.githubusercontent.com/3db/installers/main/linux_x86_64.sh <span class="p">|</span> bash /dev/stdin threedb
</pre></div>
</div>
<p>This creates a conda env that has <code class="docutils literal notranslate"><span class="pre">threedb-preview</span></code>, <code class="docutils literal notranslate"><span class="pre">threedboard</span></code>, and all other dependencies for 3DB.</p>
<p>Then, activate 3DB’s conda environment:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda activate threedb
</pre></div>
</div>
<p>You are now ready to start running 3DB experiments!</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you would like to contribute to 3DB, you can clone our repo and install it manually as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/3db/3db
pip install 3db/
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="run-a-simple-experiment">
<h2>Run a simple experiment<a class="headerlink" href="#run-a-simple-experiment" title="Permalink to this headline">¶</a></h2>
<p>Now we will demonstrate how, in only few minutes, you can setup an experiment and generate the following images of a cup rendered with random orientations on various backgrounds.</p>
<a class=""
               data-lightbox="group-background"
               href="../_images/backgrounds_example1.png"
               title=""
               data-title=""
               ><img src="../_images/backgrounds_example1.png"
                     class=""
                     width="700"
                     height="auto"
                     alt=""/>
                </a><p>Each 3DB experiment requires a <code class="docutils literal notranslate"><span class="pre">BLENDER_DATA</span></code> folder that contains two subfolders:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">blender_models/</span></code>, containing 3D models of objects (each 3D model is a <code class="docutils literal notranslate"><span class="pre">.blend</span></code> file with a single object)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">blender_environments/</span></code>, containing environments (backgrounds) on which we will render the objects</p></li>
</ul>
</div></blockquote>
<p>For this simple experiment, we provide an <a class="reference external" href="https://github.com/3db/blog_demo">example repository</a> that contains all the 3D models and environments you need.
Clone the example repository and navigate to that folder:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/3db/blog_demo
<span class="nb">cd</span> blog_demo
</pre></div>
</div>
<p>Then, update the <code class="docutils literal notranslate"><span class="pre">BLENDER_DATA</span></code> variable to point to the location of the 3D models and environments. In our case, set it as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">BLENDER_DATA</span><span class="o">=</span>data/backgrounds
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="simple">
<dt>There are three available experiments in <code class="docutils literal notranslate"><span class="pre">blog_demo</span></code>:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">backgrounds</span></code>: renders a 3D models on various backgrounds.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">texture_swap</span></code>: renders a 3D model with various textures.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">part_of_object</span></code>: renders a 3D model in various poses, then creates an attribution heatmap.</p></li>
</ul>
</dd>
</dl>
<p>Here, we focus on the <code class="docutils literal notranslate"><span class="pre">backgrounds</span></code> experiment. Refer to <a class="reference external" href="https://github.com/3db/blog_demo#running-this-demo">this README</a> for steps on how to run the other experiments.</p>
</div>
<p>Next, define the output directory where 3DB will output the results.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">RESULTS_FOLDER</span><span class="o">=</span>results
</pre></div>
</div>
<p>The next step is to tell 3DB what configurations of 3D objects to render, how to evaluate the rendered images, and what data to log.
These should all be specified inside a <code class="docutils literal notranslate"><span class="pre">YAML</span> <span class="pre">configuration</span> <span class="pre">file</span></code>.</p>
<p>Here, we provide example YAML files, which are also in the same <a class="reference external" href="https://github.com/3db/blog_demo">example repository</a> that you already cloned.
Later on we will walk you through <a class="reference external" href="writing_config_file.html">how to write your own configuration files</a>.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">base.yaml</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">backgrounds.yaml</button><button aria-controls="panel-0-0-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-2" name="0-2" role="tab" tabindex="-1">texture_swaps.yaml</button><button aria-controls="panel-0-0-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-3" name="0-3" role="tab" tabindex="-1">part_of_object.yaml</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">inference</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&#39;torchvision.models&#39;</span>
    <span class="nt">label_map</span><span class="p">:</span> <span class="s">&#39;/path/to/3db/resources/imagenet_mapping.json&#39;</span>
    <span class="nt">class</span><span class="p">:</span> <span class="s">&#39;resnet18&#39;</span>
    <span class="nt">normalization</span><span class="p">:</span>
        <span class="nt">mean</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">0.485</span><span class="p p-Indicator">,</span> <span class="nv">0.456</span><span class="p p-Indicator">,</span> <span class="nv">0.406</span><span class="p p-Indicator">]</span>
        <span class="nt">std</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">0.229</span><span class="p p-Indicator">,</span> <span class="nv">0.224</span><span class="p p-Indicator">,</span> <span class="nv">0.225</span><span class="p p-Indicator">]</span>
    <span class="nt">resolution</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">224</span><span class="p p-Indicator">,</span> <span class="nv">224</span><span class="p p-Indicator">]</span>
    <span class="nt">args</span><span class="p">:</span>
        <span class="nt">pretrained</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="nt">evaluation</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&#39;threedb.evaluators.classification&#39;</span>
    <span class="nt">args</span><span class="p">:</span>
        <span class="nt">classmap_path</span><span class="p">:</span> <span class="s">&#39;/path/to/3db/resources/ycb_to_IN.json&#39;</span>
        <span class="nt">topk</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">render_args</span><span class="p">:</span>
    <span class="nt">engine</span><span class="p">:</span> <span class="s">&#39;threedb.rendering.render_blender&#39;</span>
    <span class="nt">resolution</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">256</span>
    <span class="nt">samples</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">16</span>
<span class="nt">policy</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&quot;threedb.policies.random_search&quot;</span>
    <span class="nt">samples</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="nt">logging</span><span class="p">:</span>
    <span class="nt">logger_modules</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="s">&quot;threedb.result_logging.image_logger&quot;</span>
        <span class="p p-Indicator">-</span> <span class="s">&quot;threedb.result_logging.json_logger&quot;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">base_config</span><span class="p">:</span> <span class="s">&quot;base.yaml&quot;</span>
<span class="nt">policy</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&quot;threedb.policies.random_search&quot;</span>
    <span class="nt">samples</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">20</span>
<span class="nt">controls</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&quot;threedb.controls.blender.orientation&quot;</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&quot;threedb.controls.blender.camera&quot;</span>
        <span class="nt">zoom_factor</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">0.7</span><span class="p p-Indicator">,</span> <span class="nv">1.3</span><span class="p p-Indicator">]</span>
        <span class="nt">aperture</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8.</span>
        <span class="nt">focal_length</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">50.</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&quot;threedb.controls.blender.denoiser&quot;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-2" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-2" name="0-2" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">base_config</span><span class="p">:</span> <span class="s">&quot;base.yaml&quot;</span>
<span class="nt">controls</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&quot;threedb.controls.blender.orientation&quot;</span>
        <span class="nt">rotation_x</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">-1.57</span>
        <span class="nt">rotation_y</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.</span>
        <span class="nt">rotation_z</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">-3.14</span><span class="p p-Indicator">,</span> <span class="nv">3.14</span><span class="p p-Indicator">]</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&quot;threedb.controls.blender.position&quot;</span>
        <span class="nt">offset_x</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.</span>
        <span class="nt">offset_y</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.5</span>
        <span class="nt">offset_z</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&quot;threedb.controls.blender.pin_to_ground&quot;</span>
        <span class="nt">z_ground</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.25</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&quot;threedb.controls.blender.camera&quot;</span>
        <span class="nt">zoom_factor</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">0.7</span><span class="p p-Indicator">,</span> <span class="nv">1.3</span><span class="p p-Indicator">]</span>
        <span class="nt">view_point_x</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.</span>
        <span class="nt">view_point_y</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.</span>
        <span class="nt">view_point_z</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">0.</span><span class="p p-Indicator">,</span> <span class="nv">1.</span><span class="p p-Indicator">]</span>
        <span class="nt">aperture</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8.</span>
        <span class="nt">focal_length</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">50.</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&quot;threedb.controls.blender.material&quot;</span>
        <span class="nt">replacement_material</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;cow.blend&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;elephant.blend&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;zebra.blend&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;crocodile.blend&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;keep_original&quot;</span><span class="p p-Indicator">]</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&quot;threedb.controls.blender.denoiser&quot;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-3" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-3" name="0-3" role="tabpanel" tabindex="0"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">base_config</span><span class="p">:</span> <span class="s">&quot;base.yaml&quot;</span>
<span class="nt">render_args</span><span class="p">:</span>
    <span class="nt">engine</span><span class="p">:</span> <span class="s">&#39;threedb.rendering.render_blender&#39;</span>
    <span class="nt">resolution</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">256</span>
    <span class="nt">samples</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">16</span>
    <span class="nt">with_uv</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="nt">controls</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&quot;threedb.controls.blender.orientation&quot;</span>
        <span class="nt">rotation_x</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">-1.57</span>
        <span class="nt">rotation_y</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.</span>
        <span class="nt">rotation_z</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">-3.14</span><span class="p p-Indicator">,</span> <span class="nv">3.14</span><span class="p p-Indicator">]</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&quot;threedb.controls.blender.camera&quot;</span>
        <span class="nt">zoom_factor</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">0.7</span><span class="p p-Indicator">,</span> <span class="nv">1.3</span><span class="p p-Indicator">]</span>
        <span class="nt">view_point_x</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.</span>
        <span class="nt">view_point_y</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.</span>
        <span class="nt">view_point_z</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.</span>
        <span class="nt">aperture</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8.</span>
        <span class="nt">focal_length</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">50.</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&quot;threedb.controls.blender.denoiser&quot;</span>
    <span class="nt">module</span><span class="p">:</span> <span class="s">&quot;threedb.controls.blender.background&quot;</span>
        <span class="nt">H</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.</span>
        <span class="nt">S</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.</span>
        <span class="nt">V</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.</span>
</pre></div>
</div>
</div></div>
<p>The first file, <code class="docutils literal notranslate"><span class="pre">base.yaml</span></code>, contains common configurations that are used by the three other YAML files.
Each of the other YAML files corresponds to one of the aformentioned experiments.
We will use the <code class="docutils literal notranslate"><span class="pre">backgrounds.yaml</span></code> already present in the example repository.</p>
<p>You are now ready to run 3DB!</p>
<hr class="docutils" />
<div class="section" id="running-the-master-node">
<h3>Running the master node<a class="headerlink" href="#running-the-master-node" title="Permalink to this headline">¶</a></h3>
<p>First, run the <code class="docutils literal notranslate"><span class="pre">master</span> <span class="pre">node</span></code>, which schedules the rendering tasks (for clients). This will keep running until all the rendering tasks are complete. No rendering will start before you run at least one client (as we will show you below).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run the following command to spawn the master node, then go to the next section to (concurrently) run the clients.</span>
threedb_master <span class="nv">$BLENDER_DATA</span> backgrounds.yaml <span class="nv">$RESULTS_FOLDER</span> <span class="m">5555</span>
</pre></div>
</div>
</div>
<div class="section" id="running-the-clients">
<h3>Running the clients<a class="headerlink" href="#running-the-clients" title="Permalink to this headline">¶</a></h3>
<p>In a separate terminal window, run the <code class="docutils literal notranslate"><span class="pre">client</span></code>, which performs the rendering.
To do so, make sure that 3DB’s conda environment is activated and that the <code class="docutils literal notranslate"><span class="pre">BLENDER_DATA</span></code> variable is properly set.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda activate threedb
<span class="nb">cd</span> blog_demo
<span class="nb">export</span> <span class="nv">BLENDER_DATA</span><span class="o">=</span>data/backgrounds
</pre></div>
</div>
<p>Then run 1 client (you can run multiple clients in parallel to speed up the rendering) using the following line of code:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>threedb_workers <span class="m">1</span> <span class="nv">$BLENDER_DATA</span> <span class="m">5555</span>
</pre></div>
</div>
</div>
<div class="section" id="running-the-dashboard">
<h3>Running the dashboard<a class="headerlink" href="#running-the-dashboard" title="Permalink to this headline">¶</a></h3>
<p>A few seconds later, you will have your first results in <code class="docutils literal notranslate"><span class="pre">results/</span></code>! You can explore the results in a web interface by installing and running our threedb dashboard (<code class="docutils literal notranslate"><span class="pre">threedboard</span></code>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m threedboard <span class="nv">$RESULTS_FOLDER</span>
</pre></div>
</div>
<p>This page will display the results via <code class="docutils literal notranslate"><span class="pre">threedboard</span></code>. Below are examples of rendered images that you will see in the dashboard!</p>
<a class=""
               data-lightbox="group-background"
               href="../_images/dashboard_example1.png"
               title=""
               data-title=""
               ><img src="../_images/dashboard_example1.png"
                     class=""
                     width="700"
                     height="auto"
                     alt=""/>
                </a></div>
<div class="section" id="analyzing-the-results">
<h3>Analyzing the results<a class="headerlink" href="#analyzing-the-results" title="Permalink to this headline">¶</a></h3>
<p>You can also read the .json log file in $RESULTS_FOLDER into <code class="docutils literal notranslate"><span class="pre">pandas</span></code>, and analyze the results.
For example, you can run the following python script, which is also in the demo repository:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">analyze_backgrounds.py</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;results/details.log&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_pointer</span><span class="p">:</span>
    <span class="n">log_lines</span> <span class="o">=</span> <span class="n">file_pointer</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;results/class_maps.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_pointer</span><span class="p">:</span>
    <span class="n">class_map</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file_pointer</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_records</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">,</span> <span class="n">log_lines</span><span class="p">)))</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;prediction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;prediction&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">class_map</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;is_correct&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;is_correct&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;True&#39;</span><span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;environment&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">accuracy</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;is_correct&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">),</span>
        <span class="n">most_frequent_prediction</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;prediction&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">mode</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
<p><em>Congratulations! You have successfully completed your first 3DB experiment!</em></p>
<p>Next, we’ll break down how to <a class="reference external" href="writing_config_file.html">write your own configuration files</a>,
and other ways to view your results. For advanced users, the <a class="reference external" href="customizing.html">Customizing 3DB</a>
section of this documentation will help you customize and exploit the
modularity of 3DB.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="writing_config_file.html" class="btn btn-neutral float-right" title="Writing a configuration file" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../index.html" class="btn btn-neutral float-left" title="Welcome to 3DB’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, 3DB Team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>
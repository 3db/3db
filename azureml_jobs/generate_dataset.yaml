description: Generate sandbox quality check
target:
  service: aml
  subscription_id: f4a777ae-540c-4214-ac89-6806513322a7
  resource_group: hadisalman
  workspace_name: objectsim-ws
  cluster: cpu-8core-28GB

environment:
  image: hadisalman/sandbox:latest

# # azure storage configuration
storage:
  my_output:
    storage_account_name: objectsim
    container_name: sandbox
    mount_dir: /mnt/my_output
    is_output: True
  my_data:
    storage_account_name: objectsim
    container_name: sandbox
    mount_dir: /mnt/my_data
code:
  # upload the code
  local_dir: $CONFIG_DIR/../
data:
  storage_id: my_data

search:
  job_template:
    name: search_{experiment_name:s}_{id}
    sku: G1
    submit_args:
      container_args:
        shm_size: 64gb  
    command:
      - /blender/blender -b -P rendering/render.py 
          --
          --output /mnt/my_output/generated_datasets/version_0/
          --models /mnt/my_data/models/ 
          --log /mnt/my_output/generated_datasets/version_0/details_{id}.log 
          --metadata data_collection/output.csv 
          --env environments/white_background.blend 
          --samples 128 
          --gpu-id 0
          --resolution 256 
          --repeat 10
          --count 1000

  type: grid
  max_trials: 500
  params:
    - name: id
      spec: discrete
      values: '[i for i in range(100)]'
